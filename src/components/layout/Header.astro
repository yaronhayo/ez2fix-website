---
import { siteConfig } from '@/config/site';
import Button from '@/components/ui/Button.astro';
---

<header class="sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
  <div class="container flex h-16 sm:h-20 items-center justify-between">
    <!-- Logo -->
    <div class="flex items-center">
      <a href="/" class="flex items-center">
        <img 
          src="https://qjvikxuhqs1py0go.public.blob.vercel-storage.com/ez2fix%20logo.png" 
          alt="Ez2Fix - Professional Garage Door Repair & Installation Services" 
          width="200"
          height="80"
          loading="eager"
          decoding="sync"
          class="h-12 sm:h-16 lg:h-20 w-auto"
        />
      </a>
    </div>

    <!-- Desktop Navigation -->
    <nav class="hidden lg:flex items-center space-x-8">
      <!-- Services Dropdown -->
      <div class="relative group">
        <button 
          class="text-sm font-semibold hover:text-primary transition-colors flex items-center space-x-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 rounded px-2 py-1" 
          style="color: #1D1912;"
          aria-expanded="false"
          aria-haspopup="true"
          id="services-menu-button"
        >
          <span>Services</span>
          <svg class="h-4 w-4 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
          </svg>
        </button>
        
        <!-- Dropdown Menu -->
        <div class="absolute top-full left-0 mt-2 w-80 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform translate-y-2 group-hover:translate-y-0 z-50">
          <div class="rounded-lg shadow-xl border-2 py-2" style="background-color: #F3F3E6; border-color: #D2A63C;">
            <a href="/services/emergency-garage-door-repair" 
               class="block px-4 py-3 text-sm font-medium hover:bg-opacity-50 transition-colors" 
               style="color: #1D1912; --hover-bg: rgba(210, 166, 60, 0.1);"
               onmouseover="this.style.backgroundColor='rgba(210, 166, 60, 0.1)'"
               onmouseout="this.style.backgroundColor='transparent'">
              <div class="flex items-center space-x-3">
                <div class="w-2 h-2 rounded-full" style="background-color: #D2A63C;"></div>
                <span>24/7 Emergency Repair</span>
              </div>
            </a>
            
            <a href="/services/garage-door-spring-repair" 
               class="block px-4 py-3 text-sm font-medium hover:bg-opacity-50 transition-colors" 
               style="color: #1D1912;"
               onmouseover="this.style.backgroundColor='rgba(210, 166, 60, 0.1)'"
               onmouseout="this.style.backgroundColor='transparent'">
              <div class="flex items-center space-x-3">
                <div class="w-2 h-2 rounded-full" style="background-color: #EECD5C;"></div>
                <span>Garage Door Spring Repair</span>
              </div>
            </a>
            
            <a href="/services/garage-door-opener-installation" 
               class="block px-4 py-3 text-sm font-medium hover:bg-opacity-50 transition-colors" 
               style="color: #1D1912;"
               onmouseover="this.style.backgroundColor='rgba(210, 166, 60, 0.1)'"
               onmouseout="this.style.backgroundColor='transparent'">
              <div class="flex items-center space-x-3">
                <div class="w-2 h-2 rounded-full" style="background-color: #BB8525;"></div>
                <span>Garage Door Opener Installation</span>
              </div>
            </a>
            
            <a href="/services/new-garage-door-installation" 
               class="block px-4 py-3 text-sm font-medium hover:bg-opacity-50 transition-colors" 
               style="color: #1D1912;"
               onmouseover="this.style.backgroundColor='rgba(210, 166, 60, 0.1)'"
               onmouseout="this.style.backgroundColor='transparent'">
              <div class="flex items-center space-x-3">
                <div class="w-2 h-2 rounded-full" style="background-color: #D2A63C;"></div>
                <span>New Garage Door Installation</span>
              </div>
            </a>
            
            <a href="/services/commercial-garage-door-service" 
               class="block px-4 py-3 text-sm font-medium hover:bg-opacity-50 transition-colors" 
               style="color: #1D1912;"
               onmouseover="this.style.backgroundColor='rgba(210, 166, 60, 0.1)'"
               onmouseout="this.style.backgroundColor='transparent'">
              <div class="flex items-center space-x-3">
                <div class="w-2 h-2 rounded-full" style="background-color: #EECD5C;"></div>
                <span>Commercial Garage Door Service</span>
              </div>
            </a>
            
            <a href="/services/general-garage-door-repair" 
               class="block px-4 py-3 text-sm font-medium hover:bg-opacity-50 transition-colors" 
               style="color: #1D1912;"
               onmouseover="this.style.backgroundColor='rgba(210, 166, 60, 0.1)'"
               onmouseout="this.style.backgroundColor='transparent'">
              <div class="flex items-center space-x-3">
                <div class="w-2 h-2 rounded-full" style="background-color: #BB8525;"></div>
                <span>General Garage Door Repair</span>
              </div>
            </a>
            
            <!-- Separator -->
            <div class="border-t my-2" style="border-color: rgba(187, 133, 37, 0.2);"></div>
            
            <!-- View All Services Link -->
            <a href="/services" 
               class="block px-4 py-3 text-sm font-semibold hover:bg-opacity-50 transition-colors" 
               style="color: #D2A63C;"
               onmouseover="this.style.backgroundColor='rgba(210, 166, 60, 0.1)'"
               onmouseout="this.style.backgroundColor='transparent'">
              <div class="flex items-center space-x-3">
                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
                <span>View All Services</span>
              </div>
            </a>
          </div>
        </div>
      </div>
      
      <!-- Service Areas Dropdown -->
      <div class="relative group">
        <button class="text-sm font-semibold hover:text-primary transition-colors flex items-center space-x-1" style="color: #1D1912;">
          <span>Service Areas</span>
          <svg class="h-4 w-4 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
          </svg>
        </button>
        
        <!-- Dropdown Menu -->
        <div class="absolute top-full left-0 mt-2 w-64 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform translate-y-2 group-hover:translate-y-0 z-50">
          <div class="rounded-lg shadow-xl border-2 py-2" style="background-color: #F3F3E6; border-color: #D2A63C;">
            <a href="/service-areas/north-caldwell" 
               class="block px-4 py-3 text-sm font-medium hover:bg-opacity-50 transition-colors" 
               style="color: #1D1912;"
               onmouseover="this.style.backgroundColor='rgba(210, 166, 60, 0.1)'"
               onmouseout="this.style.backgroundColor='transparent'">
              <div class="flex items-center space-x-3">
                <div class="w-2 h-2 rounded-full" style="background-color: #D2A63C;"></div>
                <span>North Caldwell</span>
              </div>
            </a>
            
            <a href="/service-areas/west-caldwell" 
               class="block px-4 py-3 text-sm font-medium hover:bg-opacity-50 transition-colors" 
               style="color: #1D1912;"
               onmouseover="this.style.backgroundColor='rgba(210, 166, 60, 0.1)'"
               onmouseout="this.style.backgroundColor='transparent'">
              <div class="flex items-center space-x-3">
                <div class="w-2 h-2 rounded-full" style="background-color: #EECD5C;"></div>
                <span>West Caldwell</span>
              </div>
            </a>
            
            <a href="/service-areas/little-falls" 
               class="block px-4 py-3 text-sm font-medium hover:bg-opacity-50 transition-colors" 
               style="color: #1D1912;"
               onmouseover="this.style.backgroundColor='rgba(210, 166, 60, 0.1)'"
               onmouseout="this.style.backgroundColor='transparent'">
              <div class="flex items-center space-x-3">
                <div class="w-2 h-2 rounded-full" style="background-color: #BB8525;"></div>
                <span>Little Falls</span>
              </div>
            </a>
            
            <a href="/service-areas/montclair" 
               class="block px-4 py-3 text-sm font-medium hover:bg-opacity-50 transition-colors" 
               style="color: #1D1912;"
               onmouseover="this.style.backgroundColor='rgba(210, 166, 60, 0.1)'"
               onmouseout="this.style.backgroundColor='transparent'">
              <div class="flex items-center space-x-3">
                <div class="w-2 h-2 rounded-full" style="background-color: #D2A63C;"></div>
                <span>Montclair</span>
              </div>
            </a>
            
            <a href="/service-areas/cedar-grove" 
               class="block px-4 py-3 text-sm font-medium hover:bg-opacity-50 transition-colors" 
               style="color: #1D1912;"
               onmouseover="this.style.backgroundColor='rgba(210, 166, 60, 0.1)'"
               onmouseout="this.style.backgroundColor='transparent'">
              <div class="flex items-center space-x-3">
                <div class="w-2 h-2 rounded-full" style="background-color: #EECD5C;"></div>
                <span>Cedar Grove</span>
              </div>
            </a>
            
            <a href="/service-areas/fair-lawn" 
               class="block px-4 py-3 text-sm font-medium hover:bg-opacity-50 transition-colors" 
               style="color: #1D1912;"
               onmouseover="this.style.backgroundColor='rgba(210, 166, 60, 0.1)'"
               onmouseout="this.style.backgroundColor='transparent'">
              <div class="flex items-center space-x-3">
                <div class="w-2 h-2 rounded-full" style="background-color: #BB8525;"></div>
                <span>Fair Lawn</span>
              </div>
            </a>
            
            <a href="/service-areas/clifton" 
               class="block px-4 py-3 text-sm font-medium hover:bg-opacity-50 transition-colors" 
               style="color: #1D1912;"
               onmouseover="this.style.backgroundColor='rgba(210, 166, 60, 0.1)'"
               onmouseout="this.style.backgroundColor='transparent'">
              <div class="flex items-center space-x-3">
                <div class="w-2 h-2 rounded-full" style="background-color: #D2A63C;"></div>
                <span>Clifton</span>
              </div>
            </a>
            
            <!-- Separator -->
            <div class="border-t my-2" style="border-color: rgba(187, 133, 37, 0.2);"></div>
            
            <!-- View All Service Areas Link -->
            <a href="/service-areas" 
               class="block px-4 py-3 text-sm font-semibold hover:bg-opacity-50 transition-colors" 
               style="color: #D2A63C;"
               onmouseover="this.style.backgroundColor='rgba(210, 166, 60, 0.1)'"
               onmouseout="this.style.backgroundColor='transparent'">
              <div class="flex items-center space-x-3">
                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
                <span>View All Service Areas</span>
              </div>
            </a>
          </div>
        </div>
      </div>
      <a href="/faq" class="text-sm font-semibold hover:text-primary transition-colors" style="color: #1D1912;">
        FAQ
      </a>
      <a href="/reviews" class="text-sm font-semibold hover:text-primary transition-colors" style="color: #1D1912;">
        Reviews
      </a>
      <a href="/about" class="text-sm font-semibold hover:text-primary transition-colors" style="color: #1D1912;">
        About
      </a>
      <a href="/contact" class="text-sm font-semibold hover:text-primary transition-colors" style="color: #1D1912;">
        Contact
      </a>
    </nav>

    <!-- CTA Buttons -->
    <div class="flex items-center space-x-3">
      <!-- Phone CTA -->
      <a 
        href={siteConfig.links.phone} 
        class="hidden md:flex items-center px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-300 hover:shadow-lg"
        style="background-color: #BB8525; color: #F3F3E6;"
      >
        <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
        </svg>
        Call {siteConfig.business.phone}
      </a>
      
      <!-- Book Service CTA (Desktop Only) -->
      <a 
        href="/booking" 
        class="hidden lg:inline-flex items-center px-5 py-2 text-sm font-bold rounded-lg transition-all duration-300 hover:shadow-lg transform hover:scale-105"
        style="background: linear-gradient(135deg, #D2A63C 0%, #EECD5C 100%); color: #1D1912;"
      >
        <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
        </svg>
        Book Service
      </a>
    </div>

    <!-- Mobile CTA Icons & Menu -->
    <div class="lg:hidden flex items-center space-x-1 sm:space-x-2">
      <!-- Phone CTA with Number -->
      <a 
        href={siteConfig.links.phone}
        class="mobile-cta mobile-touch-enhanced inline-flex items-center px-2 sm:px-3 py-2 rounded-lg transition-all duration-300 hover:shadow-md text-xs sm:text-sm font-bold whitespace-nowrap focus-enhanced"
        style="background-color: #BB8525; color: #F3F3E6;"
        title="Call Now"
      >
        <svg class="h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
        </svg>
        <span class="hidden xs:inline">{siteConfig.business.phone}</span>
        <span class="xs:hidden">Call</span>
      </a>
      
      <!-- Calendar CTA with Text -->
      <a 
        href="/booking"
        class="mobile-cta mobile-touch-enhanced inline-flex items-center px-2 sm:px-3 py-2 rounded-lg transition-all duration-300 hover:shadow-md text-xs sm:text-sm font-bold whitespace-nowrap focus-enhanced"
        style="background: linear-gradient(135deg, #D2A63C 0%, #EECD5C 100%); color: #1D1912;"
        title="Book Service"
      >
        <svg class="h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
        </svg>
        Book
      </a>
      
      <!-- Mobile Menu Button -->
      <button 
        id="mobile-menu-button" 
        class="mobile-touch-enhanced inline-flex items-center justify-center p-2 rounded-lg transition-all duration-300 hover:shadow-md focus-enhanced"
        style="background-color: rgba(210, 166, 60, 0.1); color: #1D1912;"
        aria-expanded="false" 
        aria-haspopup="true" 
        aria-label="Open navigation menu"
      >
        <svg id="menu-open" class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
        <svg id="menu-close" class="h-6 w-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>
  </div>
  
  <!-- Mobile Navigation Menu -->
  <div 
    id="mobile-menu" 
    class="lg:hidden fixed inset-0 top-16 sm:top-20 z-[60] transform translate-x-full transition-transform duration-300 ease-in-out"
    style="background-color: #F3F3E6;"
  >
    <div class="h-full overflow-y-auto">
      <!-- Navigation Links -->
      <nav class="px-6 py-8">
        <div class="space-y-6">
          <!-- Services with Submenu -->
          <div>
            <button 
              id="mobile-services-toggle"
              class="w-full text-lg font-semibold py-3 px-4 rounded-lg transition-all duration-300 hover:shadow-md flex items-center justify-between"
              style="color: #1D1912; background-color: rgba(187, 133, 37, 0.1);"
            >
              <div class="flex items-center space-x-3">
                <svg class="h-5 w-5" style="color: #D2A63C;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5m3 0h4"/>
                </svg>
                <span>Services</span>
              </div>
              <svg id="mobile-services-arrow" class="h-5 w-5 transition-transform" style="color: #D2A63C;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
              </svg>
            </button>
            
            <!-- Services Submenu -->
            <div id="mobile-services-submenu" class="hidden mt-2 pl-4 space-y-2">
              <a href="/services/emergency-garage-door-repair" 
                 class="block py-2 px-4 text-sm font-medium rounded-lg transition-colors hover:shadow-md"
                 style="color: #1D1912; background-color: rgba(238, 205, 92, 0.1);">
                <div class="flex items-center space-x-3">
                  <div class="w-2 h-2 rounded-full" style="background-color: #D2A63C;"></div>
                  <span>24/7 Emergency Repair</span>
                </div>
              </a>
              
              <a href="/services/garage-door-spring-repair" 
                 class="block py-2 px-4 text-sm font-medium rounded-lg transition-colors hover:shadow-md"
                 style="color: #1D1912; background-color: rgba(238, 205, 92, 0.1);">
                <div class="flex items-center space-x-3">
                  <div class="w-2 h-2 rounded-full" style="background-color: #EECD5C;"></div>
                  <span>Garage Door Spring Repair</span>
                </div>
              </a>
              
              <a href="/services/garage-door-opener-installation" 
                 class="block py-2 px-4 text-sm font-medium rounded-lg transition-colors hover:shadow-md"
                 style="color: #1D1912; background-color: rgba(238, 205, 92, 0.1);">
                <div class="flex items-center space-x-3">
                  <div class="w-2 h-2 rounded-full" style="background-color: #BB8525;"></div>
                  <span>Garage Door Opener Installation</span>
                </div>
              </a>
              
              <a href="/services/new-garage-door-installation" 
                 class="block py-2 px-4 text-sm font-medium rounded-lg transition-colors hover:shadow-md"
                 style="color: #1D1912; background-color: rgba(238, 205, 92, 0.1);">
                <div class="flex items-center space-x-3">
                  <div class="w-2 h-2 rounded-full" style="background-color: #D2A63C;"></div>
                  <span>New Garage Door Installation</span>
                </div>
              </a>
              
              <a href="/services/commercial-garage-door-service" 
                 class="block py-2 px-4 text-sm font-medium rounded-lg transition-colors hover:shadow-md"
                 style="color: #1D1912; background-color: rgba(238, 205, 92, 0.1);">
                <div class="flex items-center space-x-3">
                  <div class="w-2 h-2 rounded-full" style="background-color: #EECD5C;"></div>
                  <span>Commercial Garage Door Service</span>
                </div>
              </a>
              
              <a href="/services/general-garage-door-repair" 
                 class="block py-2 px-4 text-sm font-medium rounded-lg transition-colors hover:shadow-md"
                 style="color: #1D1912; background-color: rgba(238, 205, 92, 0.1);">
                <div class="flex items-center space-x-3">
                  <div class="w-2 h-2 rounded-full" style="background-color: #BB8525;"></div>
                  <span>General Garage Door Repair</span>
                </div>
              </a>
              
              <!-- Separator and View All -->
              <div class="border-t my-2" style="border-color: rgba(187, 133, 37, 0.2);"></div>
              <a href="/services" 
                 class="block py-2 px-4 text-sm font-semibold rounded-lg transition-colors hover:shadow-md"
                 style="color: #D2A63C; background-color: rgba(210, 166, 60, 0.1);">
                <div class="flex items-center space-x-3">
                  <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                  </svg>
                  <span>View All Services</span>
                </div>
              </a>
            </div>
          </div>

          <!-- Service Areas with Submenu -->
          <div>
            <button 
              id="mobile-areas-toggle"
              class="w-full text-lg font-semibold py-3 px-4 rounded-lg transition-all duration-300 hover:shadow-md flex items-center justify-between"
              style="color: #1D1912; background-color: rgba(187, 133, 37, 0.1);"
            >
              <div class="flex items-center space-x-3">
                <svg class="h-5 w-5" style="color: #D2A63C;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                </svg>
                <span>Service Areas</span>
              </div>
              <svg id="mobile-areas-arrow" class="h-5 w-5 transition-transform" style="color: #D2A63C;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
              </svg>
            </button>
            
            <!-- Service Areas Submenu -->
            <div id="mobile-areas-submenu" class="hidden mt-2 pl-4 space-y-2">
              <a href="/service-areas/north-caldwell" 
                 class="block py-2 px-4 text-sm font-medium rounded-lg transition-colors hover:shadow-md"
                 style="color: #1D1912; background-color: rgba(238, 205, 92, 0.1);">
                <div class="flex items-center space-x-3">
                  <div class="w-2 h-2 rounded-full" style="background-color: #D2A63C;"></div>
                  <span>North Caldwell</span>
                </div>
              </a>
              
              <a href="/service-areas/west-caldwell" 
                 class="block py-2 px-4 text-sm font-medium rounded-lg transition-colors hover:shadow-md"
                 style="color: #1D1912; background-color: rgba(238, 205, 92, 0.1);">
                <div class="flex items-center space-x-3">
                  <div class="w-2 h-2 rounded-full" style="background-color: #EECD5C;"></div>
                  <span>West Caldwell</span>
                </div>
              </a>
              
              <a href="/service-areas/little-falls" 
                 class="block py-2 px-4 text-sm font-medium rounded-lg transition-colors hover:shadow-md"
                 style="color: #1D1912; background-color: rgba(238, 205, 92, 0.1);">
                <div class="flex items-center space-x-3">
                  <div class="w-2 h-2 rounded-full" style="background-color: #BB8525;"></div>
                  <span>Little Falls</span>
                </div>
              </a>
              
              <a href="/service-areas/montclair" 
                 class="block py-2 px-4 text-sm font-medium rounded-lg transition-colors hover:shadow-md"
                 style="color: #1D1912; background-color: rgba(238, 205, 92, 0.1);">
                <div class="flex items-center space-x-3">
                  <div class="w-2 h-2 rounded-full" style="background-color: #D2A63C;"></div>
                  <span>Montclair</span>
                </div>
              </a>
              
              <a href="/service-areas/cedar-grove" 
                 class="block py-2 px-4 text-sm font-medium rounded-lg transition-colors hover:shadow-md"
                 style="color: #1D1912; background-color: rgba(238, 205, 92, 0.1);">
                <div class="flex items-center space-x-3">
                  <div class="w-2 h-2 rounded-full" style="background-color: #EECD5C;"></div>
                  <span>Cedar Grove</span>
                </div>
              </a>
              
              <a href="/service-areas/fair-lawn" 
                 class="block py-2 px-4 text-sm font-medium rounded-lg transition-colors hover:shadow-md"
                 style="color: #1D1912; background-color: rgba(238, 205, 92, 0.1);">
                <div class="flex items-center space-x-3">
                  <div class="w-2 h-2 rounded-full" style="background-color: #BB8525;"></div>
                  <span>Fair Lawn</span>
                </div>
              </a>
              
              <a href="/service-areas/clifton" 
                 class="block py-2 px-4 text-sm font-medium rounded-lg transition-colors hover:shadow-md"
                 style="color: #1D1912; background-color: rgba(238, 205, 92, 0.1);">
                <div class="flex items-center space-x-3">
                  <div class="w-2 h-2 rounded-full" style="background-color: #D2A63C;"></div>
                  <span>Clifton</span>
                </div>
              </a>
              
              <!-- Separator and View All -->
              <div class="border-t my-2" style="border-color: rgba(187, 133, 37, 0.2);"></div>
              <a href="/service-areas" 
                 class="block py-2 px-4 text-sm font-semibold rounded-lg transition-colors hover:shadow-md"
                 style="color: #D2A63C; background-color: rgba(210, 166, 60, 0.1);">
                <div class="flex items-center space-x-3">
                  <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                  </svg>
                  <span>View All Service Areas</span>
                </div>
              </a>
            </div>
          </div>

          <a 
            href="/faq" 
            class="block text-lg font-semibold py-3 px-4 rounded-lg transition-all duration-300 hover:shadow-md"
            style="color: #1D1912; background-color: rgba(187, 133, 37, 0.1);"
          >
            <div class="flex items-center space-x-3">
              <svg class="h-5 w-5" style="color: #D2A63C;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              <span>FAQ</span>
            </div>
          </a>

          <a 
            href="/reviews" 
            class="block text-lg font-semibold py-3 px-4 rounded-lg transition-all duration-300 hover:shadow-md"
            style="color: #1D1912; background-color: rgba(187, 133, 37, 0.1);"
          >
            <div class="flex items-center space-x-3">
              <svg class="h-5 w-5" style="color: #D2A63C;" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 .587l3.668 7.431 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"/>
              </svg>
              <span>Reviews</span>
            </div>
          </a>

          <a 
            href="/about" 
            class="block text-lg font-semibold py-3 px-4 rounded-lg transition-all duration-300 hover:shadow-md"
            style="color: #1D1912; background-color: rgba(187, 133, 37, 0.1);"
          >
            <div class="flex items-center space-x-3">
              <svg class="h-5 w-5" style="color: #D2A63C;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              <span>About</span>
            </div>
          </a>

          <a 
            href="/contact" 
            class="block text-lg font-semibold py-3 px-4 rounded-lg transition-all duration-300 hover:shadow-md"
            style="color: #1D1912; background-color: rgba(187, 133, 37, 0.1);"
          >
            <div class="flex items-center space-x-3">
              <svg class="h-5 w-5" style="color: #D2A63C;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
              </svg>
              <span>Contact</span>
            </div>
          </a>
        </div>
      </nav>

      <!-- Mobile CTAs -->
      <div class="px-6 py-6 border-t" style="border-color: rgba(187, 133, 37, 0.2);">
        <div class="space-y-4">
          <!-- Phone CTA -->
          <a 
            href={siteConfig.links.phone}
            class="flex items-center justify-center w-full py-4 px-6 text-lg font-bold rounded-lg transition-all duration-300 hover:shadow-lg"
            style="background-color: #BB8525; color: #F3F3E6;"
          >
            <svg class="mr-3 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
            </svg>
            Call {siteConfig.business.phone}
          </a>

          <!-- Emergency Notice -->
          <div class="text-center pt-4">
            <p class="text-sm font-semibold" style="color: #BB8525;">
              🚨 24/7 Emergency Service Available
            </p>
            <p class="text-xs mt-1" style="color: #1D1912;">
              Licensed • Insured • Bergen County Trusted
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Overlay for closing menu -->
    <div 
      id="mobile-menu-overlay" 
      class="absolute inset-0 bg-black bg-opacity-50 -z-10"
    ></div>
  </div>
</header>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuOpen = document.getElementById('menu-open');
    const menuClose = document.getElementById('menu-close');
    const menuOverlay = document.getElementById('mobile-menu-overlay');
    
    // Mobile services submenu elements
    const mobileServicesToggle = document.getElementById('mobile-services-toggle');
    const mobileServicesSubmenu = document.getElementById('mobile-services-submenu');
    const mobileServicesArrow = document.getElementById('mobile-services-arrow');
    
    // Mobile service areas submenu elements
    const mobileAreasToggle = document.getElementById('mobile-areas-toggle');
    const mobileAreasSubmenu = document.getElementById('mobile-areas-submenu');
    const mobileAreasArrow = document.getElementById('mobile-areas-arrow');
    
    console.log('Mobile menu elements found:', {
      mobileMenuButton: !!mobileMenuButton,
      mobileMenu: !!mobileMenu,
      menuOpen: !!menuOpen,
      menuClose: !!menuClose
    });
    
    if (!mobileMenuButton || !mobileMenu || !menuOpen || !menuClose) {
      console.error('Mobile menu initialization failed - missing elements:', {
        mobileMenuButton: !!mobileMenuButton,
        mobileMenu: !!mobileMenu,
        menuOpen: !!menuOpen,
        menuClose: !!menuClose
      });
      return;
    }

    // Initialize mobile menu
      // Toggle mobile menu
      function toggleMobileMenu() {
        console.log('toggleMobileMenu called');
        const isOpen = !mobileMenu.classList.contains('translate-x-full');
        console.log('Menu is currently:', isOpen ? 'open' : 'closed');
        
        if (isOpen) {
          // Close menu
          console.log('Closing menu');
          mobileMenu.classList.add('translate-x-full');
          menuOpen.classList.remove('hidden');
          menuClose.classList.add('hidden');
          document.body.classList.remove('overflow-hidden');
          mobileMenuButton.setAttribute('aria-expanded', 'false');
          mobileMenuButton.setAttribute('aria-label', 'Open navigation menu');
          
          // Also close submenus when main menu closes
          if (mobileServicesSubmenu && mobileServicesArrow) {
            mobileServicesSubmenu.classList.add('hidden');
            mobileServicesArrow.classList.remove('rotate-180');
          }
          if (mobileAreasSubmenu && mobileAreasArrow) {
            mobileAreasSubmenu.classList.add('hidden');
            mobileAreasArrow.classList.remove('rotate-180');
          }
        } else {
          // Open menu
          console.log('Opening menu');
          mobileMenu.classList.remove('translate-x-full');
          menuOpen.classList.add('hidden');
          menuClose.classList.remove('hidden');
          document.body.classList.add('overflow-hidden');
          mobileMenuButton.setAttribute('aria-expanded', 'true');
          mobileMenuButton.setAttribute('aria-label', 'Close navigation menu');
        }
        
        console.log('Menu classes after toggle:', mobileMenu.className);
        console.log('Menu has translate-x-full:', mobileMenu.classList.contains('translate-x-full'));
        console.log('Menu computed style transform:', window.getComputedStyle(mobileMenu).transform);
      }

      // Mobile menu button click - handle both click and touch events
      function handleMenuButtonTap(e) {
        e.preventDefault();
        e.stopPropagation();
        console.log('Mobile menu button tapped via:', e.type);
        toggleMobileMenu();
      }

      mobileMenuButton.addEventListener('click', handleMenuButtonTap);
      mobileMenuButton.addEventListener('touchend', handleMenuButtonTap, { passive: false });
      
      // Overlay click to close menu
      if (menuOverlay) {
        menuOverlay.addEventListener('click', toggleMobileMenu);
      }
      
      // Mobile services submenu toggle
      if (mobileServicesToggle && mobileServicesSubmenu && mobileServicesArrow) {
        mobileServicesToggle.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          
          const isOpen = !mobileServicesSubmenu.classList.contains('hidden');
          
          if (isOpen) {
            mobileServicesSubmenu.classList.add('hidden');
            mobileServicesArrow.classList.remove('rotate-180');
          } else {
            mobileServicesSubmenu.classList.remove('hidden');
            mobileServicesArrow.classList.add('rotate-180');
          }
        });
      }
      
      // Mobile service areas submenu toggle
      if (mobileAreasToggle && mobileAreasSubmenu && mobileAreasArrow) {
        mobileAreasToggle.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          
          const isOpen = !mobileAreasSubmenu.classList.contains('hidden');
          
          if (isOpen) {
            mobileAreasSubmenu.classList.add('hidden');
            mobileAreasArrow.classList.remove('rotate-180');
          } else {
            mobileAreasSubmenu.classList.remove('hidden');
            mobileAreasArrow.classList.add('rotate-180');
          }
        });
      }
      
      // Close mobile menu when clicking on a navigation link (excluding submenu toggle)
      const mobileLinks = mobileMenu.querySelectorAll('nav a');
      mobileLinks.forEach(link => {
        link.addEventListener('click', function() {
          mobileMenu.classList.add('translate-x-full');
          menuOpen.classList.remove('hidden');
          menuClose.classList.add('hidden');
          document.body.classList.remove('overflow-hidden');
        });
      });

      // Close menu on window resize if switching to desktop
      window.addEventListener('resize', function() {
        if (window.innerWidth >= 1024) { // lg breakpoint
          mobileMenu.classList.add('translate-x-full');
          menuOpen.classList.remove('hidden');
          menuClose.classList.add('hidden');
          document.body.classList.remove('overflow-hidden');
          
          // Also close submenus
          if (mobileServicesSubmenu && mobileServicesArrow) {
            mobileServicesSubmenu.classList.add('hidden');
            mobileServicesArrow.classList.remove('rotate-180');
          }
          if (mobileAreasSubmenu && mobileAreasArrow) {
            mobileAreasSubmenu.classList.add('hidden');
            mobileAreasArrow.classList.remove('rotate-180');
          }
        }
      });
    }
  });

  // Fallback initialization
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initMobileMenu);
  } else {
    initMobileMenu();
  }

  // Additional fallback with timeout
  setTimeout(initMobileMenu, 100);

  function initMobileMenu() {
    // Prevent multiple initializations
    if (window.mobileMenuInitialized) return;
    
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    if (mobileMenuButton && !mobileMenuButton.hasAttribute('data-initialized')) {
      mobileMenuButton.setAttribute('data-initialized', 'true');
      window.mobileMenuInitialized = true;
      
      // Re-run the main initialization
      document.dispatchEvent(new Event('DOMContentLoaded'));
    }
  }
</script>

<style>
  /* Custom breakpoint for extra small screens */
  @media (min-width: 475px) {
    .xs\:inline {
      display: inline;
    }
    .xs\:hidden {
      display: none;
    }
  }
  
  /* Ensure proper mobile touch targets */
  @media (max-width: 640px) {
    .mobile-cta {
      min-height: 44px;
      min-width: 44px;
    }
  }
  
  /* Very small screens optimization */
  @media (max-width: 360px) {
    .container {
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
  }

  /* Mobile menu specific styles */
  @media (max-width: 1023px) {
    /* Ensure proper styling for mobile menu button */
    #mobile-menu-button {
      min-height: 44px;
      min-width: 44px;
      touch-action: manipulation;
      user-select: none;
    }

    /* Better visibility for mobile menu overlay */
    #mobile-menu-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 10;
    }

    /* Ensure mobile menu is properly visible when open */
    #mobile-menu:not(.translate-x-full) {
      display: block !important;
    }
  }
</style>