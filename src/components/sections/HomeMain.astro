---
import Card from '@/components/ui/Card.astro';
import Button from '@/components/ui/Button.astro';
import { siteConfig } from '@/config/site';

const detailedServices = [
  {
    title: "24/7 Emergency Garage Door Repair",
    description: "It's 2 AM and your door won't close - leaving your family and belongings vulnerable. Or you're running late for work and it won't open. We understand the stress and worry. That's why we're here 24/7 to restore your peace of mind.",
    image: "https://qjvikxuhqs1py0go.public.blob.vercel-storage.com/Garage%20Door%20Repair.webp",
    features: ["Available 24/7", "Same-Day Service", "All Brands Fixed", "Your Safety First"],
    warranty: "1-Year Warranty",
    popular: true,
    testimonial: "My door broke at midnight and I was panicking. They came right out and fixed it perfectly. Such a relief knowing my family was safe again.",
    badge: "24/7 AVAILABLE"
  },
  {
    title: "Garage Door Spring Repair", 
    description: "When springs break, your door becomes a 400-pound safety hazard. You might hear a loud bang, see gaps, or notice the door won't lift. Don't risk injury trying to fix it yourself - we have the right tools and experience to keep your family safe.",
    image: "https://qjvikxuhqs1py0go.public.blob.vercel-storage.com/Garage%20Door%20Spring%20Repair.jpg",
    features: ["Safe Replacement", "High-Quality Springs", "Proper Balancing", "No More Worry"],
    warranty: "10-Year Warranty",
    popular: true,
    testimonial: "I heard that scary bang and knew the spring broke. They explained everything, did it safely, and now my door works better than ever.",
    badge: "MOST COMMON"
  },
  {
    title: "Garage Door Opener Installation",
    description: "Tired of manually lifting heavy doors or dealing with an old, unreliable opener that leaves you stranded? Upgrade to smart technology that you can control from anywhere, giving you convenience and peace of mind.",
    image: "https://qjvikxuhqs1py0go.public.blob.vercel-storage.com/Garage%20Door%20Opener%20Installation.webp",
    features: ["Smart Control", "Never Get Locked Out", "Backup Power", "Phone Notifications"],
    warranty: "15-Year Warranty",
    popular: false,
    testimonial: "No more wondering if I closed the garage door. I can check and control it from work. Best home upgrade I've made!",
    badge: "SMART HOME"
  },
  {
    title: "New Garage Door Installation",
    description: "Your garage door is often the first thing people notice about your home. If yours is dented, faded, or outdated, it's hurting your property value and curb appeal. Let us help you fall in love with your home's appearance again.",
    image: "https://qjvikxuhqs1py0go.public.blob.vercel-storage.com/Garage%20Door%20Installation.png",
    features: ["Boost Home Value", "Custom Styles", "Energy Savings", "Neighborhood Envy"],
    warranty: "15-Year Warranty",
    popular: false,
    testimonial: "Everyone compliments our new door. It completely transformed our home's look and we get so many compliments from neighbors.",
    badge: "CURB APPEAL"
  },
  {
    title: "Commercial Garage Door Service",
    description: "When your business garage door fails, operations stop and money is lost. Deliveries can't get in, equipment can't get out. We understand that every minute counts for your business, and we'll get you back to making money fast.",
    image: "https://qjvikxuhqs1py0go.public.blob.vercel-storage.com/commercial-garage-door.jpg",
    features: ["Minimize Downtime", "Heavy-Duty Solutions", "Maintenance Plans", "Keep Business Moving"],
    warranty: "Commercial Warranty",
    popular: false,
    testimonial: "When our loading dock door broke, they were here in 30 minutes. Got us back to shipping orders the same day. Saved us thousands.",
    badge: "BUSINESS"
  },
  {
    title: "General Garage Door Repair",
    description: "Strange noises keeping you up? Door sticking halfway? Cables looking frayed? These aren't just annoyances - they're warning signs that could lead to expensive damage or dangerous failures. Let us fix the small problems before they become big ones.",
    image: "https://qjvikxuhqs1py0go.public.blob.vercel-storage.com/garage%20door%20repair.png",
    features: ["Prevent Big Problems", "Stop Annoying Noises", "Smooth Operation", "Peace of Mind"],
    warranty: "1-Year Warranty",
    popular: false,
    testimonial: "The grinding noise was driving me crazy. Now it runs whisper quiet and I don't worry about it breaking down anymore.",
    badge: "ALL REPAIRS"
  }
];

const whyChooseUs = [
  {
    title: "We're Your Neighbors",
    description: "15+ years living and working in Northern NJ. We understand your homes, your weather, and your worries because we share them.",
    stat: "15+ Years"
  },
  {
    title: "Your Neighbors Trust Us",
    description: "Over 10,000 families across 14 communities have welcomed us into their homes and trusted us with their garage door problems.",
    stat: "10,000+ Families"
  },
  {
    title: "We Stand Behind Everything",
    description: "When we say we'll be there, we show up. When we fix it, it stays fixed. When we promise a warranty, we honor it completely.",
    stat: "Our Word Matters"
  }
];

const processSteps = [
  {
    step: "1",
    title: "You Call, We Listen",
    description: "Tell us what's wrong - we'll understand your concern"
  },
  {
    step: "2", 
    title: "We Come Look Together",
    description: "No pressure, just honest assessment of what's needed"
  },
  {
    step: "3",
    title: "Straight Talk on Cost",
    description: "Clear pricing upfront - no surprises or hidden fees"
  },
  {
    step: "4",
    title: "Fix It Right, Guarantee It",
    description: "Quality work with warranties you can count on"
  }
];
---

<section class="py-12 md:py-16" style="background-color: #F3F3E6;">
  <div class="container mx-auto px-4">
    <div class="max-w-6xl mx-auto">
      
      <!-- Our Services -->
      <div class="text-center mb-12 md:mb-16 animate-on-scroll">
        <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4 md:mb-6" style="color: #1D1912;">
          We Turn Your <span style="color: #D2A63C;">Garage Door Stress</span> Into Relief
        </h2>
        <p class="text-lg md:text-xl max-w-3xl mx-auto leading-relaxed mb-8 md:mb-12" style="color: #BB8525;">
          Every broken garage door has the same thing in common - it disrupts your life at the worst possible moment. 
          We've helped thousands of your neighbors through these exact situations, and <span style="color: #D2A63C; font-weight: 700;">we're here for you too</span>.
        </p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 stagger-children">
          {detailedServices.map((service, index) => (
            <Card class="relative overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-2 border-2 group animate-on-scroll" style={service.popular ? "border-color: #D2A63C; box-shadow: 0 0 20px rgba(210, 166, 60, 0.3);" : "border-color: #BB8525;"}>
              
              <!-- Service Image -->
              <div class="relative h-48 overflow-hidden">
                <img 
                  src={service.image} 
                  alt={service.title}
                  class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                />
                <!-- Image Overlay -->
                <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                
                <!-- Badge -->
                <div class="absolute top-4 left-4">
                  <div class="px-3 py-1 text-xs font-bold rounded-full shadow-lg" style={service.popular ? "background: linear-gradient(135deg, #D2A63C 0%, #EECD5C 100%); color: #1D1912;" : "background-color: #BB8525; color: #F3F3E6;"}>
                    {service.badge}
                  </div>
                </div>

              </div>

              <div class="p-6">
                <!-- Service Header -->
                <div class="mb-4">
                  <h3 class="text-xl font-bold mb-2 line-clamp-2" style="color: #1D1912;">{service.title}</h3>
                  <p class="text-sm leading-relaxed mb-3 line-clamp-3" style="color: #BB8525;">{service.description}</p>
                </div>

                <!-- Service Features -->
                <div class="mb-4">
                  <div class="grid grid-cols-2 gap-2">
                    {service.features.map((feature) => (
                      <div class="flex items-center space-x-2 text-xs">
                        <svg class="h-3 w-3 flex-shrink-0" style="color: #D2A63C;" fill="currentColor" viewBox="0 0 24 24">
                          <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        <span style="color: #1D1912;">{feature}</span>
                      </div>
                    ))}
                  </div>
                </div>

                <!-- Service Info Bar -->
                <div class="flex justify-center items-center mb-4 p-3 rounded-lg" style="background-color: rgba(238, 205, 92, 0.1);">
                  <div class="text-center">
                    <div class="text-xs font-semibold" style="color: #1D1912;">Warranty</div>
                    <div class="text-xs" style="color: #BB8525;">{service.warranty}</div>
                  </div>
                </div>

                <!-- Customer Testimonial -->
                <div class="p-3 rounded-lg mb-4 border-l-3" style="background-color: rgba(187, 133, 37, 0.05); border-color: #EECD5C;">
                  <p class="text-xs italic leading-relaxed mb-2" style="color: #1D1912;">"{service.testimonial}"</p>
                  <div class="flex items-center">
                    {[1,2,3,4,5].map(() => (
                      <svg class="h-3 w-3" style="color: #D2A63C;" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 .587l3.668 7.431 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"/>
                      </svg>
                    ))}
                    <span class="text-xs font-medium ml-2" style="color: #BB8525;">Verified Review</span>
                  </div>
                </div>

                <!-- CTA Buttons -->
                <div class="space-y-3">
                  <Button 
                    href={siteConfig.links.phone}
                    class="w-full text-sm font-bold transition-all duration-300 hover:shadow-lg transform hover:scale-105"
                    style={service.popular ? "background: linear-gradient(135deg, #D2A63C 0%, #EECD5C 100%); color: #1D1912;" : "background-color: #D2A63C; color: #F3F3E6;"}
                  >
                    Call Now
                  </Button>
                  <Button 
                    href={service.title === "24/7 Emergency Garage Door Repair" ? "/services/emergency-garage-door-repair" :
                          service.title === "Garage Door Spring Repair" ? "/services/garage-door-spring-repair" :
                          service.title === "Garage Door Opener Installation" ? "/services/garage-door-opener-installation" :
                          service.title === "New Garage Door Installation" ? "/services/new-garage-door-installation" :
                          service.title === "Commercial Garage Door Service" ? "/services/commercial-garage-door-service" :
                          service.title === "General Garage Door Repair" ? "/services/general-garage-door-repair" :
                          "/booking"}
                    class="w-full text-sm font-semibold border-2 transition-all duration-300 hover:shadow-md"
                    style="color: #BB8525; border-color: #BB8525; background-color: transparent;"
                  >
                    Get Quote
                  </Button>
                </div>
              </div>
            </Card>
          ))}
        </div>
      </div>
    </div>
  </div>
</section>

<section class="py-12 md:py-16" style="background-color: #1D1912;">
  <div class="container mx-auto px-4">
    <div class="max-w-6xl mx-auto">
      
      <!-- Why Choose Ez2Fix -->
      <div class="text-center mb-12 md:mb-16">
        <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4 md:mb-6" style="color: #F3F3E6;">
          Why Your <span style="color: #D2A63C;">Neighbors</span> Call Us First
        </h2>
        <p class="text-lg md:text-xl max-w-3xl mx-auto leading-relaxed mb-8 md:mb-12" style="color: #EECD5C;">
          When garage doors break in Northern NJ, families don't just want a repair company - 
          they want neighbors who understand what they're going through. <span style="color: #D2A63C; font-weight: 700;">That's exactly what we are</span>.
        </p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 mb-8 md:mb-12">
          {whyChooseUs.map((reason, index) => (
            <Card class="p-6 md:p-8 shadow-xl border-2 text-center h-full" style="background-color: #F3F3E6; border-color: index === 0 ? '#D2A63C' : index === 1 ? '#EECD5C' : '#BB8525';">
              <div class="text-2xl md:text-3xl font-bold mb-3 md:mb-4" style={`color: ${index === 0 ? '#D2A63C' : index === 1 ? '#EECD5C' : '#BB8525'};`}>
                {reason.stat}
              </div>
              <h3 class="text-xl md:text-2xl font-bold mb-3 md:mb-4" style="color: #1D1912;">{reason.title}</h3>
              <p class="text-base md:text-lg leading-relaxed" style="color: #BB8525;">{reason.description}</p>
            </Card>
          ))}
        </div>
      </div>

      <!-- Simple Process -->
      <div class="text-center">
        <h3 class="text-3xl font-bold mb-8" style="color: #F3F3E6;">
          How We Take <span style="color: #D2A63C;">The Stress Away</span>
        </h3>
        
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 max-w-4xl mx-auto">
          {processSteps.map((step, index) => (
            <div class="text-center">
              <div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center" style={`background-color: ${index === 0 ? '#D2A63C' : index === 1 ? '#EECD5C' : index === 2 ? '#BB8525' : '#D2A63C'};`}>
                <span class="text-2xl font-bold" style={`color: ${index === 1 ? '#1D1912' : '#F3F3E6'};`}>{step.step}</span>
              </div>
              <h4 class="text-lg font-bold mb-2" style="color: #F3F3E6;">{step.title}</h4>
              <p class="text-sm leading-relaxed" style="color: #EECD5C;">{step.description}</p>
            </div>
          ))}
        </div>

        <!-- Final CTA -->
        <div class="mt-12 p-8 rounded-xl border-2 max-w-3xl mx-auto" style="background: rgba(238, 205, 92, 0.1); backdrop-filter: blur(10px); border-color: #EECD5C;">
          <p class="text-xl font-semibold mb-4" style="color: #F3F3E6;">
            Ready to Stop Worrying About Your Garage Door?
          </p>
          <p class="text-lg mb-6" style="color: #EECD5C;">
            One call and you can breathe easy again. We'll handle everything so you can get back to 
            the things that actually matter in your life.
          </p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a 
              href={siteConfig.links.phone}
              class="inline-flex items-center justify-center px-8 py-3 text-lg font-bold rounded-lg transition-all duration-300 hover:shadow-lg transform hover:scale-105"
              style="background: linear-gradient(135deg, #D2A63C 0%, #EECD5C 100%); color: #1D1912;"
            >
              Call {siteConfig.business.phone}
            </a>
            <a 
              href="/booking"
              class="inline-flex items-center justify-center px-8 py-3 text-lg font-semibold border-2 rounded-lg transition-all duration-300 hover:shadow-lg"
              style="color: #EECD5C; border-color: #EECD5C; background-color: transparent;"
            >
              Get Free Estimate
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* Animation classes */
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .animate-on-scroll.animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  /* Staggered animations for children */
  .stagger-children > .animate-on-scroll:nth-child(1) { transition-delay: 0.1s; }
  .stagger-children > .animate-on-scroll:nth-child(2) { transition-delay: 0.2s; }
  .stagger-children > .animate-on-scroll:nth-child(3) { transition-delay: 0.3s; }
  .stagger-children > .animate-on-scroll:nth-child(4) { transition-delay: 0.4s; }
  .stagger-children > .animate-on-scroll:nth-child(5) { transition-delay: 0.5s; }
  .stagger-children > .animate-on-scroll:nth-child(6) { transition-delay: 0.6s; }

  /* Enhanced hover effects */
  .animate-on-scroll:hover {
    transform: translateY(-5px) !important;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Animation observer for scroll-triggered animations
    const animateOnScroll = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animate-in');
        }
      });
    }, { 
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    });

    // Observe all animate-on-scroll elements
    const elementsToAnimate = document.querySelectorAll('.animate-on-scroll');
    elementsToAnimate.forEach(el => {
      animateOnScroll.observe(el);
    });
  });
</script>